{"ast":null,"code":"import { toEntitiesObject } from './toEntitiesObject';\nimport { isArray } from './isArray';\nimport { hasActiveState, resolveActiveEntity } from './activeState';\n// @internal\nexport function isEntityState(state) {\n  return state.entities && state.ids;\n}\n// @internal\nfunction applyMiddleware(entities, preAddEntity) {\n  let mapped = {};\n  for (const id of Object.keys(entities)) {\n    mapped[id] = preAddEntity(entities[id]);\n  }\n  return mapped;\n}\n// @internal\nexport function setEntities({\n  state,\n  entities,\n  idKey,\n  preAddEntity,\n  isNativePreAdd\n}) {\n  let newEntities;\n  let newIds;\n  if (isArray(entities)) {\n    const resolve = toEntitiesObject(entities, idKey, preAddEntity);\n    newEntities = resolve.entities;\n    newIds = resolve.ids;\n  } else if (isEntityState(entities)) {\n    newEntities = isNativePreAdd ? entities.entities : applyMiddleware(entities.entities, preAddEntity);\n    newIds = entities.ids;\n  } else {\n    // it's an object\n    newEntities = isNativePreAdd ? entities : applyMiddleware(entities, preAddEntity);\n    newIds = Object.keys(newEntities).map(id => isNaN(id) ? id : Number(id));\n  }\n  const newState = {\n    ...state,\n    entities: newEntities,\n    ids: newIds,\n    loading: false\n  };\n  if (hasActiveState(state)) {\n    newState.active = resolveActiveEntity(newState);\n  }\n  return newState;\n}\n//# sourceMappingURL=setEntities.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}